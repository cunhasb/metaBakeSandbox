riot.tag2("customerlist-tag","","","",function(t){const a={apiKey:"AIzaSyDqsYsb5JynBRE3DWDXgLy5gPEsk8xsqkw",authDomain:"crm-ligth.firebaseapp.com",databaseURL:"https://crm-ligth.firebaseio.com",projectId:"crm-ligth",storageBucket:"crm-ligth.appspot.com",messagingSenderId:"429432494555"};firebase.initializeApp(a);const e=firebase.firestore(),o=e.collection("Customers");function format(t){return'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+"<tr>"+"<td>Full name:</td>"+"<td>"+t.name+"</td>"+"</tr>"+"<tr>"+"<td>Extension number:</td>"+"<td>"+t.extn+"</td>"+"</tr>"+"<tr>"+"<td>Extra info:</td>"+"<td>And any further details here (images etc)...</td>"+"</tr>"+"</table>"}var d;function populateTable(t){$.fn.dataTable.isDataTable("#myTable")?(void 0,(d=$("#myTable").DataTable()).clear(),d.rows.add(t),d.draw()):(void 0,d=$("#myTable").DataTable({select:!0,data:t,columns:[{className:"details-control",orderable:!1,data:null,defaultContent:""},{data:"name"},{data:"position"},{data:"office"},{data:"salary"}],order:[[1,"asc"]]}))}getRealtimeUpdates=function(){o.onSnapshot(function(t){const a=[];void 0,t.docs.forEach(t=>{let e=t.data();e.id=t.id,a.push(e)}),populateTable(a)})},$("#myTable").on("click","td.details-control",function(){var t=$(this).closest("tr"),a=d.row(t);a.child.isShown()?(a.child.hide(),t.removeClass("shown")):(a.child(format(a.data())).show(),t.addClass("shown"))}),getRealtimeUpdates()});